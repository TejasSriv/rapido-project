# Rapido Backend

This project is a backend system designed to support a ride-booking application. It provides **RESTful APIs** for user management, ride booking, and administrative workflows.

## How to run the Project ðŸš€

### Prerequisites

 - **Go:** Version 1.18 or higher.
 - **PostgreSQL:** Version 12 or higher.

### Setup Steps

 1. ***Clone the repository:***

		git clone https://github.com/your-username/rapido-backend.git
		cd rapido-backend`

2. **Install dependencies:**
	`go mod tidy`

3. **Setup the database:**
   - Ensure a PostgreSQL instance is running.
   - Create and connect to the database:
	   

			CREATE DATABASE rapido_db;
			\c rapido_db;
	- Create the UUID extension:
	
			CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
	- Configure environment variables:
		- Create a `.env` file in the project root with your database connection string.
		- Example `.env` file:

				DB_URL="host=localhost user=postgres password=mysecretpassword dbname=rapido_db port=5432 sslmode=disable"

		- Adjust the values to match your PostgreSQL configuration.

### Run the Application
	  go run main.go

The server will start on http://localhost:8080.


## API Documentation
The API endpoints are designed to be RESTful and intuitive. Authentication is token-based, where a user's `UUID` acts as a simple `Bearer` Token for this project. In a real application, it would be generated dynamically using `JWT`.

### User Management APIs (Public)
**`POST /signup`**

-   **Description:** Creates a new user account.
    
-   **Body:**
	```json
	{ 
		"username": "example",
		"email": "example@example.com",
		"password": "password",
		"fullName": "Example Example",
		"phoneNumber": "1234567890",
		"role": "user" // replace "user" with "admin" for creating a admin id 
	}
	```

**`POST /login`**

-   **Description:** Authenticates a user and returns a token (the user's UUID).
    
-   **Body:**
	```json
	{ 
		"email": "example@example.com",
		"password": "password"
	}
	```
### User Management APIs (Authenticated)
These routes require a `Bearer` Token in the `Authorization` Header.

**`GET /users/:id`**

-   **Description:** Fetches details of a user's profile details (without password hash).

**`PUT /users/:id`**

-   **Description:** Fetches details of a specific user.
-	**Body:**
	```json
	{ 
		"fullName": "New Name",
		"phoneNumber": "0987654321",
		"username": "newUserName"
		"password": "newpassword" // only if you want to update your password
	}
	```
    

### Ride Booking APIs (Authenticated)
These routes require a `Bearer` Token in the `Authorization` Header.

**`POST /rides`**

-   **Description:** Creates a new ride request.
    
-   **Body:**
	```json
	{ 
		"userId": "your-user-id-token",
		"pickupLocation": "Location A",
		"dropoffLocation": "Location B",
	}
	```

**`GET /rides/{id}`**

-   **Description:** Fetches details of a specific ride.

**`GET /users/{userId}/rides`**

-   **Description:** Retrieves all rides requested by a specific user.

**`PUT /rides/{id}/cancel`**

-   **Description:** Cancels a pending or accepted ride.

### Admin APIs (Admin Role Required)

These routes require a `Bearer` token from an **`admin`** user.

-   **`GET /admin/rides`**
    
    -   **Description:** Views all rides in the system.
        
-   **`PUT /admin/rides/{id}/status`**
    
    -   **Description:** Approves or rejects a ride with admin notes.
        
    -   **Body:** 
		```json
		{ 
			"status": "accepted",
			"notes": "Approved by admin."
		}
		```

-   **`GET /admin/analytics/rides-per-day`**
    
    -   **Description:** Provides analytics on the number of rides per day.
        
-   **`GET /admin/rides/filter`**
    
    -   **Description:** Filters rides by `userId`, `status`, `startDate`, and `endDate` query parameters.
        
    -   **Example:** `/admin/rides/filter?status=completed&startDate=2025-01-01`

## Features Implemented âœ¨

-   **API Design:** A **RESTful API** with intuitive endpoint structures and clear request/response formats.
    
-   **Database Management:** A **logical database schema** design for **`User`**, **`Ride`**, and **`AdminAction`** tables. Implemented using **PostgreSQL** and **GORM**.
    
-   **Code Quality:** A **modular** and readable code structure with clear separation of controllers, models, and initializers.
    
-   **Problem Solving:** Implemented **error handling** for bad requests, not found resources, and unique constraint violations.
    
-   **Authentication:** A simple **token-based authentication** system is in place using custom Gin middleware. Currently a **`UUID`** token is being generated just for simulation. The **`userId`** is being used as the **`Bearer`** Token. In a real application this would be generated by `JWT`.
    
-   **Security:** Passwords are **hashed securely** using **`bcrypt`** before being stored in the database.
    
-   **Admin Functionality:** Dedicated APIs for administrators to manage and analyze the ride system.
